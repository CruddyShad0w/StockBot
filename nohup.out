Task exception was never retrieved
future: <Task finished coro=<StreamConn._consume_msg() done, defined at /home/snoelover18/anaconda3/lib/python3.5/site-packages/alpaca_trade_api/stream2.py:46> exception=ConnectionClosed('WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason',)>
Traceback (most recent call last):
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 674, in transfer_data
    message = yield from self.read_message()
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 742, in read_message
    frame = yield from self.read_data_frame(max_size=self.max_size)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 815, in read_data_frame
    frame = yield from self.read_frame(max_size)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 884, in read_frame
    extensions=self.extensions,
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/framing.py", line 99, in read
    data = yield from reader(2)
  File "/home/snoelover18/anaconda3/lib/python3.5/asyncio/streams.py", line 666, in readexactly
    raise IncompleteReadError(incomplete, n)
asyncio.streams.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/snoelover18/anaconda3/lib/python3.5/asyncio/tasks.py", line 240, in _step
    result = coro.send(None)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/alpaca_trade_api/stream2.py", line 50, in _consume_msg
    r = await ws.recv()
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 434, in recv
    yield from self.ensure_open()
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/websockets/protocol.py", line 646, in ensure_open
    ) from self.transfer_data_exc
websockets.exceptions.ConnectionClosed: WebSocket connection is closed: code = 1006 (connection closed abnormally [internal]), no reason
America/New_York
Getting current ticker data...
Success.
Tracking 149 symbols.
Getting historical data...
1/149
2/149
3/149
4/149
5/149
6/149
7/149
8/149
9/149
10/149
11/149
12/149
13/149
14/149
15/149
16/149
17/149
18/149
19/149
20/149
21/149
22/149
23/149
24/149
25/149
26/149
27/149
28/149
29/149
30/149
31/149
32/149
33/149
34/149
35/149
36/149
37/149
38/149
39/149
40/149
41/149
42/149
43/149
44/149
45/149
46/149
47/149
48/149
49/149
50/149
51/149
52/149
53/149
54/149
55/149
56/149
57/149
58/149
59/149
60/149
61/149
62/149
63/149
64/149
65/149
Traceback (most recent call last):
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/urllib3/connectionpool.py", line 377, in _make_request
    httplib_response = conn.getresponse(buffering=True)
TypeError: getresponse() got an unexpected keyword argument 'buffering'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "./algo.py", line 405, in <module>
    run(get_tickers(), market_open, market_close)
  File "./algo.py", line 90, in run
    minute_history = get_1000m_history_data(symbols)
  File "./algo.py", line 42, in get_1000m_history_data
    size="minute", symbol=symbol, limit=1000
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/alpaca_trade_api/polygon/rest.py", line 75, in historic_agg
    raw = self.get(path, params)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/alpaca_trade_api/polygon/rest.py", line 33, in get
    return self._request('GET', path, params=params, version=version)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/alpaca_trade_api/polygon/rest.py", line 28, in _request
    resp = self._session.request(method, url, params=params)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/requests/sessions.py", line 512, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/requests/sessions.py", line 622, in send
    r = adapter.send(request, **kwargs)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/requests/adapters.py", line 445, in send
    timeout=timeout
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/urllib3/connectionpool.py", line 600, in urlopen
    chunked=chunked)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/urllib3/connectionpool.py", line 380, in _make_request
    httplib_response = conn.getresponse()
  File "/home/snoelover18/anaconda3/lib/python3.5/http/client.py", line 1198, in getresponse
    response.begin()
  File "/home/snoelover18/anaconda3/lib/python3.5/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/snoelover18/anaconda3/lib/python3.5/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/snoelover18/anaconda3/lib/python3.5/socket.py", line 576, in readinto
    return self._sock.recv_into(b)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/urllib3/contrib/pyopenssl.py", line 285, in recv_into
    return self.connection.recv_into(*args, **kwargs)
  File "/home/snoelover18/anaconda3/lib/python3.5/site-packages/OpenSSL/SSL.py", line 1813, in recv_into
    result = _lib.SSL_read(self._ssl, buf, nbytes)
KeyboardInterrupt
